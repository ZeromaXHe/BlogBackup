# 第2章 实例研究：设计一个文档编辑器

## 2.1 设计问题

我们将考察Lexi设计中的7个问题：

1）文档结构

2）格式化

3）修饰用户界面

4）支持多种视感（look-and-feel）标准

5）支持多种窗口系统

6）用户操作

7）拼写检查和连字符

## 2.2 文档结构

内部表示应支持如下几点：

- 保持文档的物理结构。
- 可视化生成和显示文档
- 根据显示位置来映射文档内部表示的元素。

还有些限制条件。首先，我们应该一致对待文本和图形。

其次，我们的实现不应该过分强调内部表示中单个元素和元素组之间的区别。

### 2.2.1 递归组合

### 2.2.2 图元

图元（glyph）。它的子类既定义了基本的图形元素（像字符和图像），又定义了结构元素（像行和列）。

图元有三个基本责任，1）怎样画出自己，2）它们占用多大空间，3）它们的父图元和子图元是什么。