# 第5章 继承

利用**继承（inheritance）**，人们可以基于已存在的类构造一个新类。继承已存在的类就是复用（继承）这些类的方法和域。在此基础上，还可以添加一些新的方法和域， 以满足新的需求。 

**反射（reflection）**是指在程序运行期间发现更多的类及其属性的能力。这是一个功能强大的特性，使用起来也比较复杂。由于主要是开发软件工具的人员， 而不是编写应用程序的人员对这项功能感兴趣， 因此对于这部分内容， 可以先浏览一下，待日后再返回来学习。 

## 5.1 类、超类和子类

### 5.1.1 定义子类

关键字extends

*C++注释：Java 与 C++ 定义继承类的方式十分相似。 Java 用关键字 extends 代替了 C++中的冒号（：）。 在 Java 中， 所有的继承都是公有继承， 而没有 C++ 中的私有继承和保护继承*

关键字 extends 表明正在构造的新类派生于一个已存在的类。 已存在的类称为超类( superclass )、 基类（base class ) 或父类（parent class); 新类称为子类（subclass、) 派生类( derived class ) 或孩子类（child class )。 超类和子类是 Java 程序员最常用的两个术语，而了解其他语言的程序员可能更加偏爱使用父类和孩子类，这些都是继承时使用的术语。 

*注释： 前缀“ 超” 和“ 子” 来源于计算机科学和数学理论中的集合语言的术语。所有雇员组成的集合包含所有经理组成的集合。可以这样说， 雇员集合是经理集合的超集， 也可以说， 经理集合是雇员集合的子集。*

### 5.1.2 覆盖方法

方法不能够直接地访问超类的私有域。 方法一定要访问私有域， 就必须借助于公有的接口 

关键字super

*注释：有些人认为 super 与 this 引用是类似的概念， 实际上，这样比较并不太恰当。这是因为 super 不是一个对象的引用， 不能将 super 赋给另一个对象变量， 它只是一个指示编译器调用超类方法的特殊关键字。*

正像前面所看到的那样， 在子类中可以增加域、 增加方法或覆盖超类的方法，然而绝对不能删除继承的任何域和方法。 

*C++ 注释： 在 Java 中使用关键字 super 调用超类的方法， 而在 C++ 中则采用超类名加上：：操作符的形式。 例如， 在 Manager 类的 getSalary 方法中， 应该将 super.getSalary 替换为 Employee::getSalary*

### 5.1.3 子类构造器

这里的关键字 super 具有不同的含义。语句`super(n, s, year, month, day);`是“ 调用超类 Employee 中含有 n、 s、year、 month 和 day 参数的构造器” 的简写形式。 

我们可以通过 super 实现对超类构造器的调用。使用super 调用构造器的语句必须是子类构造器的第一条语句。 

如果子类的构造器没有显式地调用超类的构造器， 则将自动地调用超类默认（没有参数 ) 的构造器。如果超类没有不带参数的构造器， 并且在子类的构造器中又没有显式地调用超类的其他构造器， 则 Java 编译器将报告错误。 

*注释： 回忆一下， 关键字 this 有两个用途：一是引用隐式参数，二是调用该类其他的构造器 ， 同样，super 关键字也有两个用途：一是调用超类的方法，二是调用超类的构造器。在调用构造器的时候， 这两个关键字的使用方式很相似。调用构造器的语句只能作为另一个构造器的第一条语句出现。 构造参数既可以传递给本类 （ this) 的其他构造器， 也可以传递给超类（super ) 的构造器。*

*C++ 注释： 在 C++ 的构造函数中， 使用初始化列表语法调用超类的构造函数， 而不调用super*

一个对象变量（例如， 变量 e ) 可以指示多种实际类型的现象被称为**多态（ polymorphism)**。 在运行时能够自动地选择调用哪个方法的现象称为**动态绑定（dynamic binding) **。在本章中将详细地讨论这两个概念。 

*C++ 注释： 在 Java 中， 不需要将方法声明为虚拟方法。动态绑定是默认的处理方式。如果不希望让一个方法具有虚拟特征， 可以将它标记为 final (本章稍后将介绍关键字 final）。*

### 5.1.4 继承层次

继承并不仅限于一个层次。 例如， 可以由 Manager 类派生 Executive 类。由一个公共超类派生出来的所有类的集合被称为**继承层次（ inheritance hierarchy )**。在继承层次中， 从某个特定的类到其祖先的路径被称为该类的**继承链 ( inheritance chain) **。

*C++ 注释： Java 不支持多继承。有关Java 中多继承功能的实现方式， 请参看下一章 6.1 节有关接口的讨论。*

### 5.1.5 多态

有一个用来判断是否应该设计为继承关系的简单规则， 这就是“ is-a” 规则， 它表明子类的每个对象也是超类的对象。 

"is-a" 规则的另一种表述法是置换法则。它表明程序中出现超类对象的任何地方都可以用子类对象置换。 

在 Java 程序设计语言中， 对象变量是多态的。 

*警告：为了确保不发生这类错误， 所有数组都要牢记创建它们的元素类型， 并负责监督仅将类型兼容的引用存储到数组中。*

### 5.1.6 理解方法调用

