# 第8章 多态

在面向对象的程序设计语言中，**多态**是继数据抽象和继承之后的第三种基本特征。

多态通过分离做什么和怎么做，从另一角度将接口和实现分离开来。多态不但能够改善代码的组织结构和可读性，还能创建可扩展的程序。

“封装”通过合并特征和行为来创建新的数据类型。“实现隐藏”则通过细节“私有化”把接口和实现分离开来。这种类型的组织机制对于那些拥有过程化程序设计背景的人来说容易理解。而多态的作用则是消除类型之间的耦合关系。继承运行将对象视为它自己本身的类型或其基类型来处理。多态方法调用允许一种类型表现出与其他相似类型之间的区别，只要它们都是从同一基类导出而来的。这种区别是根据方法行为的不同而表示出来的，虽然这些方法都可以通过同一个基类来调用。

多态，也被称作**动态绑定**、**后期绑定**或**运行时绑定**。

## 8.1 再论向上转型

### 8.1.1 忘记对象类型

我们只写这样一个简单方法，它仅接受基类作为参数，而不是那些特殊的导出类。我们不管导出类的存在，编写的代码只是与基类打交道。

这正是多态所允许的。

## 8.2 转机

### 8.2.1 方法调用绑定

将一个方法调用同一个方法主题关联起来被称作**绑定**。若在程序执行前进行绑定（如果有的话，由编译器和连接程序实现），叫做**前期绑定**。

**后期绑定**含义就是在运行时根据对象的类型进行绑定。后期绑定也叫做**动态绑定**或**运行时绑定**。如果一种语言想实现后期绑定，就必须具有某种机制以便在运行时能判断对象的类型，从而调用恰当的方法。

Java中除了static方法和final方法（private方法属于final方法）之外，其他所有的方法都是后期绑定。

声明final还有一点重要原因：有效“关闭”动态绑定，或者说，告诉编译器不需要对它进行动态绑定。但最好根据设计来决定是否使用final，而不是处于试图提高性能的目的。

### 8.2.2 产生正确的行为

在编译时，编译器不需要获得任何特殊信息就能进行正确的调用。

### 8.2.3 可扩展性

### 8.2.4 缺陷：“覆盖”私有方法