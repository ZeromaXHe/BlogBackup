# 第4章 控制执行流程

if-else, while, do-while, for, return, break以及选择语句switch。Java并不支持goto语句。在Java中，仍然可以进行类似goto那样的跳转，但比起典型的goto，有了很多限制。

## 4.1 true和false

Java不允许我们将一个数字作为布尔值使用。如果想在布尔测试中使用一个非布尔值，比如在if(a)中，那么首先必须用一个条件表达式将其转换成布尔值，例如if(a!=0)

## 4.2 if-else

## 4.3 迭代

while、do-while和for用来控制循环，有时将它们划分为**迭代语句（iteration statement）**。语句会重复执行，知道起控制作用的**布尔表达式（Boolean expression）**得到“假”的结果为止。

Math库里的static（静态）方法random()，该方法的作用是产生0和1之间（包括0，但不包括1)的一个double值。

### 4.3.1 do-while

while和do-while唯一的区别就是do-while中的语句至少会执行一次，即便表达式第一次就被计算为false。

### 4.3.2 for

**初始化（initialization）**表达式、**布尔表达式（Boolean-expression）**，或者**步进（step）**运算都可以为空。

java.lang.Character包装器类，这个类不但能把char基本类型的值包装进对象，还提供了一些别的有用的方法。这里用到了static isLowerCase()方法来检查问题中的字符是否为小写字母。

对于像C语言那样的传统的过程性语言，要求所有变量都在一个块的开头定义，以便编译器在创建这个块的时候，可以为那些变量分配空间。而在Java和C++中，则可在整个块的范围内分散变量声明，在真正需要的地方才加以定义。

### 4.3.3 逗号操作符

本章前面已经提到了逗号操作符（注意不是逗号分隔符，逗号用做分隔符时用来分隔函数的不同参数），Java里唯一用到逗号操作符的地方就是for循环的控制表达式。在控制表达式的初始化和步进控制部分，可以使用一系列的逗号分隔的语句；而且那些语句均会独立执行。

通过使用逗号操作符，可以在for语句内定义多个变量，但是它们必须具有相同的类型。

for语句中int的定义覆盖i和j，在初始化部分实际上可以拥有任意数量的具有相同类型的变量定义。在一个控制表达式中，定义多个变量的这种能力只限于for循环适用，在其他任何选择或迭代语句中都不能适用这种方式。

## 4.4 Foreach语法

Java SE5 引入了一种新的更加简洁的for语法用于数组和容器，即foreach语法，表示不必创建int变量去对访问项构成的序列进行计数，foreach将自动产生每一项。

String类有一个方法toCharArray(),它返回一个char数组。

就像在11章所看到的，foreach还可以用于任何Iterable对象

## 4.5 return

return关键词有两方面的用途：一方面指定一个方法返回什么值（假设它没有void返回值），另一方面它会导致当前方法退出，并返回那个值。

如果在返回void的方法中没有return语句，那么在该方法的结尾处会有一个隐式的return，因此在方法中并非总是必须要有一个return语句。但是，如果一个方法声明它将返回void以外的其他东西，那么必须确保每一条代码路径都将返回一个值。

## 4.6 break和continue

break用于强行退出循环，不执行循环中剩余的语句。而continue则停止执行当前的迭代，然后退回循环起始处，开始下一次迭代。

无穷循环：第一种while(true);第二种for(;;)

## 4.7 臭名昭著的goto

编程语言一开始就有goto关键词了。

goto语句是在源码级上的跳转，这使其招致了不好的声誉。真正问题并不在于使用goto，而在于goto的滥用；而且少数情况下，goto还是组织控制流程的最佳手段。

尽管goto仍是Java中的一个保留字，但在语言中并未使用它：Java没有goto.然而，Java也能完成一些类似于跳转的操作，这与break和continue这两个关键词有关。它们其实不是一个跳转，而是中断迭代语句的一种方法。之所以把它们纳入goto问题中一起讨论，是由于它们使用了相同的机制：标签。

标签是后面跟有冒号的标识符。

如：` label1: `

在Java中，标签起作用的唯一的地方刚好是在迭代语句之前。“刚好之前”的意思表明，在标签和迭代之间置入任何语句都不好。而在迭代前设置标签的唯一理由是：我们希望在其中嵌套另一个迭代或者一个开关（你很快就会学习到它）。这是由于break和continue关键词通常只中断当前循环，但若随同标签一起使用，它们就会中断循环，直到标签所在的地方。

如` break label1; `和` continue label1; `

break本身只能中断最内层的循环（continue同样也是如此）。

同样的规则亦适用于while：

1）一般的continue会退回最内层循环的开头（顶部），并继续执行。

2）带标签的continue会到达标签的位置，并重新进入紧接在那个标签后面的循环。

3）一般的break会中断并跳出当前循环。

4）带标签的break会中断并跳出标签所指的循环。

要记住的重点是：在Java里需要使用标签的唯一理由就是因为有循环嵌套存在，而且想从多层嵌套中break或continue。

## 4.8 switch

若省略break，会继续执行后面case语句，直到遇到一个break为止。注意最后的default语句没有break，因为执行流程移到了break的跳转目的地。当然，如果考虑到编程风格方面的原因，完全可以在default语句的末尾放置一个break，尽管它没有任何实际的用处。

switch语句是实现多路选择的一种干净利落的方法。但它要求使用一个选择因子，并且必须是int或char那样的整数值。对于非整数类型，则必须使用一系列if语句。在下一章的末尾，你将看到Java SE5的新特性enum，它可以帮助我们减弱这种限制，因为enum可以和switch协调工作。